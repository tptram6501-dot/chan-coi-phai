<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi Tiết Cụm - Súng Cối 60mm</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background: #000; color: white; font-family: sans-serif; overflow: hidden; }
        
        .back-btn {
            position: absolute; top: 15px; left: 15px; z-index: 10;
            padding: 8px 15px; background: rgba(255,255,255,0.1);
            color: white; border: 1px solid #4caf50; border-radius: 4px;
            cursor: pointer; text-decoration: none; font-size: 12px;
        }

        /* Hàng phím chức năng kỹ thuật xếp dọc bên phải */
        .tech-sidebar {
            position: absolute; right: 15px; top: 50%; transform: translateY(-50%);
            display: flex; flex-direction: column; gap: 10px; z-index: 10;
        }

        .btn-tech {
            width: 100px; padding: 12px 5px; cursor: pointer;
            background: rgba(255, 193, 7, 0.2); color: #ffc107;
            border: 1px solid #ffc107; border-radius: 4px;
            font-weight: bold; font-size: 11px; transition: 0.3s;
        }
        .btn-tech:hover { background: rgba(255, 193, 7, 0.4); box-shadow: 0 0 10px #ffc107; }

        model-viewer { width: 100vw; height: 100vh; }
        
        .title-label {
            position: absolute; top: 15px; width: 100%; text-align: center;
            color: #4caf50; letter-spacing: 2px; font-size: 14px; pointer-events: none;
        }
    </style>
</head>
<body>

    <a href="../index.html" class="back-btn">← QUAY LẠI</a>
    <div class="title-label">MÔ HÌNH CHI TIẾT</div>

    <div class="tech-sidebar">
        <button class="btn-tech" onclick="playAnim('ThaoRoi')">THÁO RỜI</button>
        <button class="btn-tech" onclick="playAnim('LapGhep')">LẮP GHÉP</button>
        <button class="btn-tech" onclick="playAnim('CatBo')">CẮT BỔ</button>
    </div>

    <model-viewer id="tech-model" 
        src="../models/CumTayCam.glb" 
        camera-controls 
        shadow-intensity="1"
        exposure="1">
    </model-viewer>

    <script>
        const modelViewer = document.querySelector("#tech-model");

        function playAnim(action) {
            // Lưu ý: Tên animation trong ngoặc phải khớp chính xác với tên bạn đặt trong Blender/Inventor
            if (action === 'ThaoRoi') {
                modelViewer.animationName = "Explode"; // Tên clip tháo rời
                modelViewer.play({repetitions: 1});
            } else if (action === 'LapGhep') {
                modelViewer.animationName = "Explode"; 
                // Chạy ngược animation để tạo hiệu ứng lắp ghép
                modelViewer.currentTime = modelViewer.duration; 
                modelViewer.play({repetitions: 1, backward: true});
            } else if (action === 'CatBo') {
                modelViewer.animationName = "SectionView"; // Tên clip cắt bổ
                modelViewer.play({repetitions: 1});
            }
        }
    </script>
</body>
</html>
